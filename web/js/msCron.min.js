/*
 =========================================================
 msCronjs
 https://github.com/onterumahendra/CronScheduler
 Copyright (c) 2021 MSquare Solutions
 =========================================================
 */
/*
 * Contributions:
 *  - Onteru Mahendra (msbrother445@gmail.com)
 *  - Padala Mallikarjuna (mallikarjuna.909@gmail.com)
 */
!function(y){y.fn.msCron=function(t){void 0===t&&(t={getCron:"",setCron:"",activeTab:"MINUTES"});y.extend({getCron:"",setCron:"",activeTab:""},t);var e=y("<div/>",{id:"CronGenMainDiv",style:"padding:15px;",role:"tablist"}),a=y("<nav/>",{id:"msCronTabs"}),n=y("<div/>",{id:"nav-tab",class:"nav nav-tabs",role:"tablist"});y(n).appendTo(a),y('<a id="msMinutesTab" class="nav-link active" role="tab" data-bs-toggle="tab" href="#Minutes">Minutes</a>').appendTo(n),y('<a id="msHourlyTab" class="nav-link" role="tab" data-bs-toggle="tab" href="#Hourly">Hourly</a>').appendTo(n),y('<a id="msDailyTab" class="nav-link" role="tab" data-bs-toggle="tab" href="#Daily">Daily</a>').appendTo(n),y('<a id="msWeeklyTab" class="nav-link" role="tab" data-bs-toggle="tab" href="#Weekly">Weekly</a>').appendTo(n),y('<a id="msMonthlyTab" class="nav-link" role="tab" data-bs-toggle="tab" href="#Monthly">Monthly</a>').appendTo(n),y('<a id="msYearlyTab" class="nav-link" role="tab" data-bs-toggle="tab" href="#Yearly">Yearly</a>').appendTo(n),y(a).appendTo(e);var l=y("<div/>",{class:"tab-content"}),p=y("<div/>",{class:"tab-pane fade show active",id:"Minutes",role:"tabpanel","aria-labelledby":"msMinutesTab"}),n=y("<div/>",{style:"padding:15px"});y(n).append("Every&nbsp;"),y("<input/>",{id:"MinutesInput",type:"text",value:"1",class:"form-control",style:"width: 80px;display:inline"}).appendTo(n),y(n).append("&nbsp;minute(s)"),y(n).appendTo(p),y(p).appendTo(l);a=y("<div/>",{class:"tab-pane fade",id:"Hourly",role:"tabpanel","aria-labelledby":"msHourlyTab"}),n=y("<div/>",{style:"padding:15px"});y("<input/>",{type:"radio",value:"1",name:"HourlyRadio",checked:"checked"}).appendTo(n),y(n).append("&nbsp;Every&nbsp;"),y("<input/>",{id:"HoursInput",type:"text",class:"form-control",value:"1",style:"width: 80px;display:inline"}).appendTo(n),y(n).append("&nbsp;hour(s)"),y(n).appendTo(a);p=y("<div/>",{style:"padding:15px"});y("<input/>",{type:"radio",value:"2",name:"HourlyRadio"}).appendTo(p),y(p).append("&nbsp;At&nbsp;"),y(p).append('<select id="AtHours" class="form-control hours" style="width: 80px;display:inline;margin-right:5px;"></select>'),y(p).append('<select id="AtMinutes" class="form-control minutes" style="width: 80px;display:inline;margin-right:5px;"></select>'),y(p).appendTo(a),y(a).appendTo(l);n=y("<div/>",{class:"tab-pane fade",id:"Daily",role:"tabpanel","aria-labelledby":"msDailyTab"}),p=y("<div/>",{style:"padding:15px"});y("<input/>",{type:"radio",value:"1",name:"DailyRadio",checked:"checked"}).appendTo(p),y(p).append("&nbsp;Every&nbsp;"),y("<input/>",{id:"DaysInput",type:"text",value:"1",class:"form-control",style:"width: 80px;display:inline"}).appendTo(p),y(p).append("&nbsp;day(s)"),y(p).appendTo(n);a=y("<div/>",{style:"padding:15px"});y("<input/>",{type:"radio",value:"2",name:"DailyRadio"}).appendTo(a),y(a).append("&nbsp;Every week day&nbsp;"),y(a).appendTo(n),y(n).append("Start time&nbsp;"),y(n).append('<select id="DailyHours" class="form-control hours" style="width: 80px;display:inline;margin-right:5px;"></select>'),y(n).append('<select id="DailyMinutes" class="form-control minutes" style="width: 80px;display:inline;margin-right:5px;"></select>'),y(n).appendTo(l);p=y("<div/>",{class:"tab-pane fade",id:"Weekly",role:"tabpanel","aria-labelledby":"msWeeklyTab"}),a=y("<div/>",{style:"padding:15px"}),n=y("<label/>",{class:"checkbox-inline",style:"margin-right:15px"}).appendTo(a);y("<input/>",{type:"checkbox",value:"MON",style:"margin-right:5px"}).appendTo(n),y(n).append("Monday");n=y("<label/>",{class:"checkbox-inline",style:"margin-right:15px"}).appendTo(a);y("<input/>",{type:"checkbox",value:"TUE",style:"margin-right:5px"}).appendTo(n),y(n).append("Tuesday");n=y("<label/>",{class:"checkbox-inline",style:"margin-right:15px"}).appendTo(a);y("<input/>",{type:"checkbox",value:"WED",style:"margin-right:5px"}).appendTo(n),y(n).append("Wednesday");n=y("<label/>",{class:"checkbox-inline",style:"margin-right:15px"}).appendTo(a);y("<input/>",{type:"checkbox",value:"THU",style:"margin-right:5px"}).appendTo(n),y(n).append("Thursday");n=y("<label/>",{class:"checkbox-inline",style:"margin-right:15px"}).appendTo(a);y("<input/>",{type:"checkbox",value:"FRI",style:"margin-right:5px"}).appendTo(n),y(n).append("Friday");n=y("<label/>",{class:"checkbox-inline",style:"margin-right:15px"}).appendTo(a);y("<input/>",{type:"checkbox",value:"SAT",style:"margin-right:5px"}).appendTo(n),y(n).append("Saturday");n=y("<label/>",{class:"checkbox-inline",style:"margin-right:15px"}).appendTo(a);y("<input/>",{type:"checkbox",value:"SUN",style:"margin-right:5px"}).appendTo(n),y(n).append("Sunday"),y(a).appendTo(p),y(p).append("Start time&nbsp;"),y(p).append('<select id="WeeklyHours" class="form-control hours" style="width: 80px;display:inline;margin-right:5px;"></select>'),y(p).append('<select id="WeeklyMinutes" class="form-control minutes" style="width: 80px;display:inline;margin-right:5px;"></select>'),y(p).appendTo(l);a=y("<div/>",{class:"tab-pane fade",id:"Monthly",role:"tabpanel","aria-labelledby":"msMonthlyTab"}),p=y("<div/>",{style:"padding:15px"});y("<input/>",{type:"radio",value:"1",name:"MonthlyRadio",checked:"checked"}).appendTo(p),y(p).append("&nbsp;Day&nbsp"),y("<input/>",{id:"DayOfMOnthInput",type:"text",class:"form-control",value:"1",style:"width: 80px;display:inline"}).appendTo(p),y(p).append("&nbsp;of every&nbsp;"),y("<input/>",{id:"MonthInput",type:"text",class:"form-control",value:"1",style:"width: 80px;display:inline;"}).appendTo(p),y(p).append("&nbsp;month(s)"),y(p).appendTo(a);p=y("<div/>",{style:"padding:15px"});y("<input/>",{type:"radio",value:"2",name:"MonthlyRadio"}).appendTo(p),y(p).append("&nbsp;"),y(p).append('<select id="WeekDay" class="form-control day-order-in-month" style="width: 80px;display:inline;margin-right:5px;"></select>'),y(p).append('<select id="DayInWeekOrder" class="form-control week-days" style="width: 100px;display:inline"></select>'),y(p).append("&nbsp;of every&nbsp;"),y("<input/>",{id:"EveryMonthInput",type:"text",class:"form-control",value:"1",style:"width: 80px;display:inline;"}).appendTo(p),y(p).append("&nbsp;month(s)"),y(p).appendTo(a),y(a).append("Start time&nbsp;"),y(a).append('<select id="MonthlyHours" class="form-control hours" style="width: 80px;display:inline;margin-right:5px;"></select>'),y(a).append('<select id="MonthlyMinutes" class="form-control minutes" style="width: 80px;display:inline;margin-right:5px;"></select>'),y(a).appendTo(l);p=y("<div/>",{class:"tab-pane fade",id:"Yearly",role:"tabpanel","aria-labelledby":"msYearlyTab"}),a=y("<div/>",{style:"padding:15px"});y("<input/>",{type:"radio",value:"1",name:"YearlyRadio",checked:"checked"}).appendTo(a),y(a).append("&nbsp;Every&nbsp"),y(a).append('<select id="MonthsOfYear" class="form-control months" style="width: 150px;display:inline"></select>'),y(a).append("&nbsp;in day&nbsp;"),y("<input/>",{id:"YearInput",type:"text",class:"form-control",value:"1",style:"width: 80px;display:inline;"}).appendTo(a),y(a).appendTo(p);var i,s,r,a=y("<div/>",{style:"padding:15px"});function d(e,a){for(var n=0;n<a.length;n++)y(e).append("<option value='"+a[n].val+"'>"+a[n].text+"</option>")}function o(e){return"<option value='"+e+"'>"+(1==(e=e).toString().length?"0"+e:e)+"</option>"}function c(){var e=y("nav#msCronTabs div a.active").prop("id"),a="";switch(e){case"msMinutesTab":a="0 0/"+y("#MinutesInput").val()+" * 1/1 * ? *",e="MINUTES";break;case"msHourlyTab":switch(y("input:radio[name=HourlyRadio]:checked").val()){case"1":a="0 0 0/"+y("#HoursInput").val()+" 1/1 * ? *";break;case"2":a="0 "+Number(y("#AtMinutes").val())+" "+Number(y("#AtHours").val())+" 1/1 * ? *"}e="HOURLY";break;case"msDailyTab":switch(y("input:radio[name=DailyRadio]:checked").val()){case"1":a="0 "+Number(y("#DailyMinutes").val())+" "+Number(y("#DailyHours").val())+" 1/"+y("#DaysInput").val()+" * ? *";break;case"2":a="0 "+Number(y("#DailyMinutes").val())+" "+Number(y("#DailyHours").val())+" ? * MON-FRI *"}e="DAILY";break;case"msWeeklyTab":var n="";y("#Weekly input:checkbox:checked").each(function(){n+=y(this).val()+","}),0<n.length&&(n=n.substr(0,n.length-1)),a="0 "+Number(y("#WeeklyMinutes").val())+" "+Number(y("#WeeklyHours").val())+" ? * "+n+" *",e="WEEKLY";break;case"msMonthlyTab":switch(y("input:radio[name=MonthlyRadio]:checked").val()){case"1":a="0 "+Number(y("#MonthlyMinutes").val())+" "+Number(y("#MonthlyHours").val())+" "+y("#DayOfMOnthInput").val()+" 1/"+y("#MonthInput").val()+" ? *";break;case"2":a="0 "+Number(y("#MonthlyMinutes").val())+" "+Number(y("#MonthlyHours").val())+" ? 1/"+Number(y("#EveryMonthInput").val())+" "+y("#DayInWeekOrder").val()+"#"+y("#WeekDay").val()+" *"}e="MONTHLY";break;case"msYearlyTab":switch(y("input:radio[name=YearlyRadio]:checked").val()){case"1":a="0 "+Number(y("#YearlyMinutes").val())+" "+Number(y("#YearlyHours").val())+" "+y("#YearInput").val()+" "+y("#MonthsOfYear").val()+" ? *";break;case"2":a="0 "+Number(y("#YearlyMinutes").val())+" "+Number(y("#YearlyHours").val())+" ? "+y("#MonthsOfYear2").val()+" "+y("#DayWeekForYear").val()+"#"+y("#DayOrderInYear").val()+" *"}e="YEARLY"}t.getCron=a,t.activeTab=e}return y("<input/>",{type:"radio",value:"2",name:"YearlyRadio"}).appendTo(a),y(a).append("&nbsp;The&nbsp;"),y(a).append('<select id="DayOrderInYear" class="form-control day-order-in-month" style="width: 90px;display:inline;margin-right:5px;"></select>'),y(a).append('<select id="DayWeekForYear" class="form-control week-days" style="width: 100px;display:inline"></select>'),y(a).append("&nbsp;of&nbsp;"),y(a).append('<select id="MonthsOfYear2" class="form-control months" style="width: 110px;display:inline"></select>'),y(a).appendTo(p),y(p).append("Start time&nbsp;"),y(p).append('<select id="YearlyHours" class="form-control hours" style="width: 80px;display:inline;margin-right:5px;"></select>'),y(p).append('<select id="YearlyMinutes" class="form-control minutes" style="width: 80px;display:inline;margin-right:5px;"></select>'),y(p).appendTo(l),y(l).appendTo(e),y(this).html(e),function(){for(var e=0;e<60;e++)e<24&&y(".hours").each(function(){y(this).append(o(e))}),y(".minutes").each(function(){y(this).append(o(e))})}(),i=[{text:"First",val:"1"},{text:"Second",val:"2"},{text:"Third",val:"3"},{text:"Fourth",val:"4"}],y(".day-order-in-month").each(function(){d(this,i)}),s=[{text:"Monday",val:"MON"},{text:"Tuesday",val:"TUE"},{text:"Wednesday",val:"WED"},{text:"Thursday",val:"THU"},{text:"Friday",val:"FRI"},{text:"Saturday",val:"SAT"},{text:"Sunday",val:"SUN"}],y(".week-days").each(function(){d(this,s)}),r=[{text:"January",val:"1"},{text:"February",val:"2"},{text:"March",val:"3"},{text:"April",val:"4"},{text:"May",val:"5"},{text:"June",val:"6"},{text:"July",val:"7"},{text:"August",val:"8"},{text:"September",val:"9"},{text:"October",val:"10"},{text:"Novermber",val:"11"},{text:"December",val:"12"}],y(".months").each(function(){d(this,r)}),y("#CronGenMainDiv select,input").change(function(e){c()}),y("#CronGenMainDiv input").focus(function(e){c()}),""!==t.setCron?function(e,a){var n=(n=a.replace(/ +(?= )/g,"").trim()).split(" ");if(7===n.length)switch(e){case"MINUTES":y('#msCronTabs a[href="#Minutes"]').tab("show"),a=a.match(/\d+/g),y("#MinutesInput").val(a[2]);break;case"HOURLY":y('#msCronTabs a[href="#Hourly"]').tab("show"),6===(a=a.match(/\d+/g)).length?(y("#HoursInput").val(a[3]),y("input:radio[name=HourlyRadio][value=1]").prop("checked",!0)):(y("#AtMinutes ").val(a[1]),y("#AtHours ").val(a[2]),y("input:radio[name=HourlyRadio][value=2]").prop("checked",!0));break;case"DAILY":y('#msCronTabs a[href="#Daily"]').tab("show"),5===(a=a.match(/\d+/g)).length?(y("#DaysInput").val(a[4]),y("input:radio[name=DailyRadio][value=1]").prop("checked",!0)):y("input:radio[name=DailyRadio][value=2]").prop("checked",!0),y("#DailyHours ").val(a[2]),y("#DailyMinutes ").val(a[1]);break;case"WEEKLY":y('#msCronTabs a[href="#Weekly"]').tab("show");var t=a;a=a.match(/\d+/g),y("#WeeklyMinutes").val(a[1]),y("#WeeklyHours").val(a[2]),y("#Weekly input:checkbox").each(function(){0<=t.indexOf(y(this).val())&&y(this).prop("checked",!0)});break;case"MONTHLY":y('#msCronTabs a[href="#Monthly"]').tab("show"),-1!==a.indexOf("#")?(y("input:radio[name=MonthlyRadio][value=2]").prop("checked",!0),y("#DayInWeekOrder").val(a.substring(a.indexOf("#"),a.indexOf("#")-3)),a=a.match(/\d+/g),y("#WeekDay").val(a[5]),y("#EveryMonthInput").val(a[4])):(a=a.match(/\d+/g),y("#DayOfMOnthInput").val(a[3]),y("#MonthInput").val(a[5]),y("input:radio[name=MonthlyRadio][value=1]").prop("checked",!0)),y("#MonthlyHours").val(a[1]),y("#MonthlyMinutes").val(a[2]);break;case"YEARLY":y('#msCronTabs a[href="#Yearly"]').tab("show"),-1!==a.indexOf("#")?(y("input:radio[name=YearlyRadio][value=2]").prop("checked",!0),y("#DayWeekForYear").val(a.substring(a.indexOf("#"),a.indexOf("#")-3)),a=a.match(/\d+/g),y("#DayOrderInYear").val(a[4]),y("#MonthsOfYear2").val(a[3])):(a=a.match(/\d+/g),y("#MonthsOfYear").val(a[4]),y("#YearInput").val(a[3]),y("input:radio[name=YearlyRadio][value=1]").prop("checked",!0)),y("#YearlyHours").val(a[2]),y("#YearlyMinutes").val(a[1])}else alert("Invalid Cron Expression..!")}(t.activeTab,t.setCron):c(),t}}(jQuery);